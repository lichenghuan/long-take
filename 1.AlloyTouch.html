<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AlloyTouch 监听用户滑动</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body id="wrapper">


</body>

</html>
<script src="./js/alloy_touch.js"></script>
<script>

    var progress = 0;
    var scrollHeight = document.querySelector('#wrapper').offsetHeight;

    // var alloyTouch = new AlloyTouch({
    //     touch: "#wrapper",//反馈触摸的dom
    //     vertical: true,//不必需，默认是true代表监听竖直方向touch
    //     target: target, //运动的对象
    //     property: "translateY",  //被运动的属性
    //     min: 100, //不必需,运动属性的最小值
    //     max: 2000, //不必需,滚动属性的最大值
    //     sensitivity: 1,//不必需,触摸区域的灵敏度，默认值为1，可以为负数
    //     factor: 1,//不必需,表示触摸位移运动位移与被运动属性映射关系，默认值是1
    //     moveFactor: 1,//不必需,表示touchmove位移与被运动属性映射关系，默认值是1
    //     step: 1,//用于校正到step的整数倍
    //     initialValue: 0,  //初始化的value值
    //     bindSelf: false,
    //     maxSpeed: 1, //不必需，触摸反馈的最大速度限制 
    //     initialValue: 0,
    //     change: function (value) { },
    //     touchStart: function (evt, value) { },
    //     touchMove: function (evt, value) {},
    //     touchEnd: function (evt, value) { },
    //     tap: function (evt, value) { },
    //     pressMove: function (evt, value) { },
    //     animationEnd: function (value) { } //运动结束
    // })


    // 获取进度 progress  范围0-1
    var alloyTouch = new AlloyTouch({
        touch: "#wrapper",//反馈触摸的dom
        vertical: true,//不必需，默认是true代表监听竖直方向touch
        min: -scrollHeight * 3,  //不必需,运动属性的最小值        //设置上滑的最小值！！！
        max: 0,   //不必需,滚动属性的最大值                       //设置下滑的最大值！！！
        initialValue: 0,  //初始化的value值
        change: function (value) {
            // console.log(value) //此处value 最大值为max:0   最小值为min: -scrollHeight * 3
            progress = -value / (scrollHeight * 3);
            progress = progress < 0 ? 0 : progress;
            progress = progress > 1 ? 1 : progress;
            console.log(progress);
        },
    })



// github：https://github.com/AlloyTeam/AlloyTouch
</script>